<script lang="ts">
    import {loadProgress} from "$lib/stores";
    import {onMount} from "svelte";

    onMount(() => {
        loadProgress.subscribe((value) => {
            let end = 900 - (900 * value) / 100;

            document.querySelectorAll("svg path").forEach((path) => {
                path.style.strokeDashoffset = end;
            })

            if (end == 0) {
                document.querySelectorAll("svg path").forEach((path) => {
                    path.style.strokeDashoffset = 0;
                })

                document.getElementById("svgcontainer").style.opacity = "0";
                document.getElementById("svgcontainer").style.transform = "scale(1.2)";

                setTimeout(() => {
                    document.getElementById("svgcontainer").style.display = "none";
                }, 300)
            }
        });
    })
</script>

<div id="svgcontainer">
    <svg width="1414" height="215" viewBox="0 0 1414 215" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1309.76 103.103V2.69998V1.69998H1308.76H1254.46H1253.46V2.69998V207V208H1254.46H1308.76H1309.76V207V159.572L1346.67 207.609L1346.97 208H1347.46H1409.86H1411.9L1410.65 206.389L1350.38 128.253L1408.52 60.6521L1409.94 59H1407.76H1348.36H1347.91L1347.61 59.3458L1309.76 103.103Z"
              stroke="black" stroke-width="2"/>
        <path d="M1091.03 174.188L1091.03 174.197L1091.04 174.206C1097.93 185.957 1107.35 195.281 1119.3 202.166L1119.31 202.173C1131.28 208.868 1145.16 212.2 1160.9 212.2C1176.64 212.2 1190.52 208.868 1202.49 202.173L1202.49 202.17C1214.64 195.284 1224.08 185.957 1230.77 174.195L1230.77 174.188C1237.47 162.223 1240.8 148.652 1240.8 133.5C1240.8 118.349 1237.47 104.876 1230.77 93.1076C1224.08 81.1469 1214.65 71.8164 1202.49 65.1286C1190.52 58.2323 1176.65 54.8 1160.9 54.8C1145.15 54.8 1131.28 58.2329 1119.31 65.1304C1107.35 71.8189 1097.92 81.1474 1091.03 93.1007L1091.03 93.1055C1084.33 104.874 1081 118.349 1081 133.5C1081 148.652 1084.33 162.223 1091.03 174.188ZM1177.29 116.207L1177.3 116.215L1177.31 116.223C1181.68 120.403 1183.9 126.025 1183.9 133.2C1183.9 140.374 1181.68 146.107 1177.29 150.493C1172.89 154.896 1167.45 157.1 1160.9 157.1C1154.36 157.1 1148.92 154.899 1144.51 150.501C1140.33 146.118 1138.2 140.383 1138.2 133.2C1138.2 126.011 1140.33 120.385 1144.51 116.207C1148.91 111.804 1154.35 109.6 1160.9 109.6C1167.45 109.6 1172.89 111.804 1177.29 116.207Z"
              stroke="black" stroke-width="2"/>
        <path d="M924.035 174.188L924.04 174.197L924.045 174.206C930.934 185.957 940.36 195.281 952.308 202.166L952.32 202.173C964.29 208.868 978.163 212.2 993.908 212.2C1009.65 212.2 1023.53 208.868 1035.5 202.173L1035.5 202.17C1047.65 195.284 1057.08 185.957 1063.78 174.195L1063.78 174.188C1070.47 162.223 1073.81 148.652 1073.81 133.5C1073.81 118.349 1070.47 104.876 1063.78 93.1076C1057.09 81.1469 1047.65 71.8164 1035.5 65.1286C1023.53 58.2323 1009.65 54.8 993.908 54.8C978.161 54.8 964.286 58.2329 952.314 65.1304C940.358 71.8189 930.93 81.1474 924.041 93.1007L924.039 93.1055C917.343 104.874 914.008 118.349 914.008 133.5C914.008 148.652 917.343 162.223 924.035 174.188ZM1010.3 116.207L1010.31 116.215L1010.32 116.223C1014.69 120.403 1016.91 126.025 1016.91 133.2C1016.91 140.374 1014.69 146.107 1010.3 150.493C1005.9 154.896 1000.46 157.1 993.908 157.1C987.364 157.1 981.925 154.899 977.523 150.501C973.335 146.118 971.208 140.383 971.208 133.2C971.208 126.011 973.337 120.385 977.515 116.207C981.918 111.804 987.36 109.6 993.908 109.6C1000.46 109.6 1005.9 111.804 1010.3 116.207Z"
              stroke="black" stroke-width="2"/>
        <path d="M747.198 207V208H748.198H831.298C855.202 208 873.268 203.284 885.322 193.682L885.33 193.676C897.425 183.836 903.398 169.011 903.398 149.4C903.398 141.271 901.874 133.54 898.822 126.215C895.742 118.824 890.709 112.871 883.75 108.366C881.33 106.73 878.626 105.382 875.64 104.319C876.973 103.701 878.266 103.014 879.517 102.255C886.278 98.1574 891.505 92.5182 895.188 85.3574L895.193 85.3472C898.873 77.9868 900.698 69.5293 900.698 60C900.698 47.4882 898.479 36.9194 893.986 28.3397C889.455 19.4868 881.648 12.8439 870.676 8.3739C859.704 3.90395 844.657 1.69998 825.598 1.69998H748.198H747.198V2.69998V207ZM803.498 81.2V55.6H826.198C832.114 55.6 836.242 56.6916 838.781 58.6863L838.794 58.6966L838.807 58.7064C841.478 60.665 842.898 63.8167 842.898 68.4C842.898 72.9833 841.478 76.135 838.807 78.0936L838.794 78.1034L838.781 78.1137C836.242 80.1084 832.114 81.2 826.198 81.2H803.498ZM803.498 154.1V128.5H830.098C834.954 128.5 838.841 129.568 841.832 131.624C844.695 133.593 846.198 136.741 846.198 141.3C846.198 145.834 844.614 148.981 841.555 150.96L841.543 150.968L841.532 150.976C838.547 153.028 834.563 154.1 829.498 154.1H803.498Z"
              stroke="black" stroke-width="2"/>
        <path d="M677.18 105.092C679.432 107.441 681.115 110.173 682.221 113.3H631.93C633.131 110.256 634.89 107.634 637.195 105.421L637.195 105.421C642.174 100.634 648.808 98.2 657.202 98.2C666.448 98.2 673.026 100.56 677.165 105.076L677.173 105.084L677.18 105.092ZM631.132 150.4H730.102H730.883L731.072 149.643C731.494 147.956 731.799 145.586 732 142.567C732.202 139.541 732.302 136.218 732.302 132.6C732.302 118.649 729.268 105.791 723.191 94.0406C717.109 82.2824 708.387 72.8508 697.041 65.7576C685.852 58.4363 672.356 54.8 656.602 54.8C641.449 54.8 628.166 58.236 616.789 65.1418C605.428 71.8379 596.602 81.175 590.319 93.1318C584.032 104.895 580.902 118.36 580.902 133.5C580.902 149.233 584.029 162.904 590.324 174.478C596.613 186.043 605.449 194.981 616.818 201.275C628.19 207.57 641.462 210.7 656.602 210.7C672.746 210.7 687.016 207.269 699.385 200.376C711.934 193.494 721.282 184.362 727.384 172.972L727.861 172.081L726.965 171.613L691.865 153.313L691.1 152.915L690.594 153.612C687.473 157.902 683.571 161.515 678.877 164.449C674.486 167.12 668.588 168.5 661.102 168.5C651.262 168.5 643.615 166.14 638.046 161.535C634.71 158.673 632.394 154.975 631.132 150.4Z"
              stroke="black" stroke-width="2"/>
        <path d="M553.564 209.491C558.224 208.883 562.686 207.87 566.949 206.449L567.633 206.221V205.5V154.5V153.113L566.317 153.551C564.564 154.135 562.303 154.726 559.523 155.322L559.516 155.324L559.508 155.326C556.985 155.908 554.361 156.2 551.633 156.2C546.007 156.2 541.665 154.748 538.494 151.95C535.423 149.24 533.733 144.21 533.733 136.5V111.1H566.633H567.633V110.1V60V59H566.633H533.733V23.1V22.1H532.733H488.933H488.195L487.977 22.8048L476.795 59H455.333H454.333V60V110.1V111.1H455.333H477.433V153.9C477.433 174.057 482.776 188.711 493.703 197.577L493.712 197.584C504.546 206.169 519.494 210.4 538.433 210.4C544.065 210.4 549.11 210.098 553.564 209.491ZM553.564 209.491C553.565 209.491 553.567 209.491 553.568 209.491L553.433 208.5L553.562 209.492C553.563 209.492 553.563 209.491 553.564 209.491Z"
              stroke="black" stroke-width="2"/>
        <path d="M316.623 182.047L316.044 182.717L316.64 183.373C326.711 194.451 337.127 202.253 347.896 206.724C358.631 211.18 370.463 213.4 383.38 213.4C396.287 213.4 407.532 211.283 417.088 207.013C426.629 202.75 434.08 196.842 439.398 189.275L439.405 189.265C444.724 181.491 447.38 172.692 447.38 162.9C447.38 149.078 443.102 137.997 434.469 129.776C425.884 121.6 412.187 115.346 393.518 110.929C382.514 108.128 375.362 106.139 372.013 104.957C370.353 104.371 369.191 103.788 368.462 103.231C367.725 102.667 367.58 102.252 367.58 102C367.58 101.428 367.752 100.956 368.098 100.54C368.457 100.109 369.043 99.6935 369.936 99.3343C371.983 98.5931 374.749 98.2 378.28 98.2C385.773 98.2 392.859 99.3827 399.547 101.743L399.559 101.747L399.572 101.751C406.257 103.914 412.247 107.156 417.548 111.475L418.223 112.025L418.861 111.432L448.861 83.5323L449.591 82.8531L448.914 82.1209C441.429 74.0292 432.335 67.2619 421.644 61.8141C411.062 56.119 397.992 53.3 382.48 53.3C369.558 53.3 358.299 55.7225 348.732 60.6055C339.194 65.2749 331.848 71.5891 326.738 79.5603C321.633 87.5239 319.08 96.3116 319.08 105.9C319.08 117.726 322.758 127.77 330.136 135.969C337.527 144.181 349.548 150.248 366.039 154.271C374.837 156.47 381.428 158.168 385.817 159.365L385.827 159.368C388.104 159.961 389.961 160.549 391.408 161.128C392.871 161.714 393.852 162.265 394.429 162.759L394.486 162.808L394.55 162.848C395.919 163.704 396.48 164.711 396.48 165.9C396.48 166.673 395.889 167.62 393.787 168.58C391.938 169.315 389.678 169.7 386.98 169.7C380.319 169.7 373.442 168.329 366.342 165.568C359.283 162.823 351.984 158.099 344.447 151.355L343.688 150.676L343.023 151.447L316.623 182.047Z"
              stroke="black" stroke-width="2"/>
        <path d="M166.71 134.415L166.704 134.422L166.699 134.43C161.558 141.832 159.02 151.044 159.02 162C159.02 171.571 161.365 180.157 166.071 187.728C170.769 195.285 177.204 201.206 185.355 205.485C193.514 209.768 202.676 211.9 212.82 211.9C229.161 211.9 241.922 208.169 250.964 200.565L250.974 200.557C251.239 200.328 251.502 200.096 251.762 199.863L254.169 207.308L254.393 208H255.12H301.92H302.92V207V119.4C302.92 106.077 300.397 94.6089 295.305 85.0344C290.206 75.2464 282.554 67.8012 272.378 62.711C262.399 57.4188 250.131 54.8 235.62 54.8C223.334 54.8 211.543 56.4112 200.251 59.6368C189.197 62.652 179.036 66.474 169.773 71.1056L168.941 71.5216L169.296 72.3815L184.896 110.181L185.31 111.185L186.277 110.69C194.011 106.723 201.323 104.06 208.213 102.681C215.37 101.29 221.603 100.6 226.92 100.6C233.371 100.6 238.085 102.164 241.235 105.128L241.257 105.149L241.28 105.168C244.646 107.973 246.32 111.588 246.32 116.1V119.898C237.364 114.682 226.38 112.1 213.42 112.1C204.08 112.1 195.238 114.03 186.905 117.89C178.745 121.563 172.01 127.076 166.71 134.415ZM243.013 153.107L243.026 153.12L243.04 153.133C245.637 155.545 246.92 158.48 246.92 162C246.92 165.517 245.639 168.561 243.026 171.18C240.449 173.566 237.015 174.8 232.62 174.8C227.81 174.8 224.19 173.557 221.628 171.192C219.215 168.582 218.02 165.534 218.02 162C218.02 158.455 219.222 155.513 221.627 153.107C224.194 150.541 227.812 149.2 232.62 149.2C237.001 149.2 240.431 150.525 243.013 153.107Z"
              stroke="black" stroke-width="2"/>
        <path d="M76.1 104H57.6V56.5H76.1C85.1672 56.5 91.7811 58.5716 96.1257 62.5385L96.1335 62.5456L96.1415 62.5526C100.666 66.5115 103 72.4003 103 80.4C103 88.1907 100.671 93.9838 96.1415 97.9474L96.1335 97.9544L96.1257 97.9615C91.7811 101.928 85.1672 104 76.1 104ZM57.6 207V159.1H77.9C94.2193 159.1 108.571 156.178 120.929 150.303L120.941 150.297C133.31 144.214 142.957 135.383 149.859 123.812L149.863 123.806C156.773 112.017 160.2 97.5315 160.2 80.4C160.2 63.2708 156.774 48.8828 149.861 37.2906C142.96 25.5206 133.311 16.6848 120.935 10.7997C108.576 4.7224 94.2214 1.69998 77.9 1.69998H2.3H1.3V2.69998V207V208H2.3H56.6H57.6V207Z"
              stroke="black" stroke-width="2"/>
    </svg>

</div>

<style lang="scss">
  * {
    padding: 0;
    margin: 0;
  }

  div {
    transition: background-color 0.5s ease-in-out, opacity 0.35s ease, transform 0.5s ease;
    height: 100vh;
    width: 100vw;
    position: absolute;
    top: 0;
    z-index: 998;
    background-color: white;

    :global(.dark-mode) & {
      background-color: black;
    }
  }

  svg {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.5);
    animation: blink 2s ease infinite alternate;

    @media (max-width: 900px) {
      transform: translate(-50%, -50%) scale(0.4);
      animation: blinkMedium 2s ease infinite alternate;
    }

    @media (max-width: 600px) {
      transform: translate(-50%, -50%) scale(0.2);
      animation: blinkSmall 2s ease infinite alternate;
    }
  }

  svg path {
    transition: stroke-dasharray 0.5s ease-in-out, stroke-dashoffset 0.5s ease-in-out, fill 0.3s ease-in-out, stroke 0.5s ease-in-out;

    fill: #eeeeee;
    stroke: #c9c9c9;
    stroke-width: 2px;
    stroke-dasharray: 900px;
    stroke-dashoffset: 900px;
    stroke-linecap: round;
    stroke-linejoin: round;

    :global(.dark-mode) & {
      fill: #1a1a1a;
      stroke: #333333;
    }

    @keyframes blink {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(0.48);
      }
      100% {
        opacity: 0.8;
        transform: translate(-50%, -50%) scale(0.50);
      }
    }

    @keyframes blinkSmall {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(0.18);
      }
      100% {
        opacity: 0.8;
        transform: translate(-50%, -50%) scale(0.2);
      }
    }

    @keyframes blinkMedium {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(0.38);
      }
      100% {
        opacity: 0.8;
        transform: translate(-50%, -50%) scale(0.4);
      }
    }
  }
</style>